{% extends 'base.html' %}
{% load static %}

{% block content %}


      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.js"></script> 
     
{% block styles %}
<link rel="stylesheet" href="{% static 'css/project.css' %}" >
{% endblock %}

<main id="main">

  <!-- ======= project Section ======= -->
  <section id="project" class="project mt-5">
    <div class="container mt-4">

      <div class="row">

        <div class="col-lg-7 entries">

          <article class="entry entry-single">

            <div class="entry-img">
              <img src="{{project.image.url}}" alt="" class="img-fluid">
            </div>

            <h2 class="entry-title">
              <a href="project-single.html">{{project.title}}</a>
            </h2>

            <form method="POST" action="/project/delete/{{project.id}}">
              {%csrf_token%}
               <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
             </form>

            <div class="entry-meta">
              <ul>
                <li class="d-flex align-items-center"><i class="icofont-user"></i> <a href=""></a>{{project.user.username}}</a></li>
                <li class="d-flex align-items-center"><i class="icofont-wall-clock"></i> <a href=""><time datetime="2020-01-01"> {{ project.date_posted|date:"M d, Y" }}</time></a></li>
                <li class="d-flex align-items-center"><i class="icofont-comment"></i> <a href="">12 Comments</a></li>
              </ul>
            </div>

            <div class="entry-content">
              <p>
                {{project.title}}
              </p>
            </div>

            <div class="entry-footer clearfix">
              <div class="float-left">
                <i class="icofont-folder"></i>

                <i class="icofont-tags"></i>
                <ul class="tags">
                  <li><a href="#">Kelvin Koech</a></li>
                  <li><a href="#">2021</a></li>
                </ul>
              </div>

              <div class="float-right share">
                <a href="" title="Share on Twitter"><i class="icofont-twitter"></i></a>
                <a href="" title="Share on Facebook"><i class="icofont-facebook"></i></a>
                <a href="" title="Share on Instagram"><i class="icofont-instagram"></i></a>
              </div>
            </div>

          </article><!-- End project entry -->
        </div><!-- End project entries list -->

        <div class="col-lg-5">

          <div class="sidebar">
            <h3 class="sidebar-title">Rate the project</h3>

            <div class="sidebar-item mb-3 categories">
              <form method="POST" action="/project/rate/{{project.id}}">
                {%csrf_token%}
                <div class="form-group">
                  <label>Design</label>
                  <select name="design" required class="form-control">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="4">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                </div>

                <div class="form-group">
                <label>Usability</label>
                <select name="userbility" required class="form-control">
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="4">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
                </div>

                <div class="form-group">
                <label>Content</label>
                <select name="content" required class="form-control">
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="4">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
                </div>
                <div class="text-right">
                    <button type="submit" class="btn btn-outline-success rounded-0 mt-03">Rate</button>
                </div>
              </form>

            </div>
           
            <!-- End rate form categories-->

            <h3 class="sidebar-title">Votes</h3>
            <div class="sidebar-item recent-posts">
              <div class="post-item clearfix">
                 Average : {{average}}
                 <!-- AVERAGE CHART -->
                <canvas id="myChart"></canvas>  
                    <script>
                          window.onload=function(){
                          var data = {
                          labels: [
                            "Average",
                            "",
                          ],
                          datasets: [
                            {
                              data: [300, 50],
                              backgroundColor: [
                                "Green","Red"
                              ],
                              hoverBackgroundColor: [
                                "#FF6283","#36A2EB","#FFCC54"
                              ]
                            }]
                        };
                        var promisedDeliveryChart = new Chart(document.getElementById('myChart'), {
                          type: 'doughnut',
                          data: data,
                          options: {
                            responsive: true,
                            legend: {
                              display: false
                            }
                          }
                        });
                        Chart.pluginService.register({
                          beforeDraw: function(chart) {
                            var width = chart.chart.width,
                                height = chart.chart.height,
                                ctx = chart.chart.ctx;
                            ctx.restore();
                            var fontSize = (height / 134).toFixed(2);
                            ctx.font = fontSize + "em sans-serif";
                            ctx.textBaseline = "middle";
                            var text = "Average",
                                textX = Math.round((width - ctx.measureText(text).width) / 2),
                                textY = height / 2;
                            ctx.fillText(text, textX, textY);
                            ctx.save();
                          }
                        });
                            }

                    </script>
                </div>
                <!-- end of average -->
                 
              </div>

              <div class="post-item clearfix">
                <h4>Userbility</h4>
                <p>{{userbility}}</p>
                <h4>Content</h4>
                <p>{{content}}</p>
                <h4>Design</h4>
                <p>{{design}}</p>
              </div>

            </div><!-- End sidebar recent posts-->

          </div><!-- End sidebar -->

        </div><!-- End project sidebar -->

      </div>

    </div>
  </section><!-- End project Section -->

</main><!-- End #main -->

<script src="{% static 'js/project.js' %}"></script>
{% endblock %}